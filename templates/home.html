<!-- home.html - Modern Redesign -->
{% extends 'base.html' %}
{% load static %}

{% block title %}TeleConnect - India's Fastest Online SIM Delivery{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section */
    .hero-section {
        min-height: 100vh;
        background: linear-gradient(135deg, 
            rgba(99, 102, 241, 0.9) 0%, 
            rgba(139, 92, 246, 0.9) 100%),
            url('https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=1920');
        background-size: cover;
        background-position: center;
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .hero-content {
        padding-top: 8rem;
        position: relative;
        z-index: 2;
    }
    
    .hero-badge {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        display: inline-flex;
        align-items: center;
        margin-bottom: 2rem;
    }
    
    .hero-badge i {
        color: #fbbf24;
        margin-right: 0.5rem;
        animation: pulse 2s infinite;
    }
    
    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        line-height: 1.2;
        margin-bottom: 1.5rem;
    }
    
    .hero-highlight {
        background: linear-gradient(120deg, #fbbf24 0%, #f59e0b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .hero-subtitle {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        max-width: 600px;
    }
    
    .hero-features {
        display: flex;
        gap: 2rem;
        margin-bottom: 3rem;
        flex-wrap: wrap;
    }
    
    .feature-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    
    .feature-icon {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Stats Section */
    .stats-section {
        margin-top: -100px;
        position: relative;
        z-index: 3;
    }
    
    .stat-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        box-shadow: var(--shadow-lg);
        transition: all 0.3s ease;
        height: 100%;
    }
    
    .stat-card:hover {
        transform: translateY(-10px);
    }
    
    .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 0.5rem;
    }
    
    /* Services Section */
    .services-section {
        padding: 5rem 0;
        background: linear-gradient(180deg, #f9fafb 0%, white 100%);
    }
    
    .service-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        text-align: center;
        height: 100%;
        border: 2px solid transparent;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .service-card:hover {
        border-color: var(--primary-color);
        transform: translateY(-10px);
    }
    
    .service-icon {
        width: 80px;
        height: 80px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        font-size: 2rem;
    }
    
    /* Plans Section */
    .plans-section {
        padding: 5rem 0;
        background: white;
    }
    
    .plan-card {
        border: 2px solid #e5e7eb;
        border-radius: 20px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
    }
    
    .plan-card:hover {
        border-color: var(--primary-color);
        transform: translateY(-5px);
    }
    
    .plan-header {
        background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
        padding: 1.5rem;
        text-align: center;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .plan-price {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        line-height: 1;
    }
    
    .plan-features {
        padding: 1.5rem;
    }
    
    .feature-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .feature-list li {
        padding: 0.5rem 0;
        display: flex;
        align-items: center;
    }
    
    .feature-list i {
        color: var(--secondary-color);
        margin-right: 0.75rem;
    }
    
    /* Testimonials */
    .testimonials-section {
        padding: 5rem 0;
        background: linear-gradient(135deg, #f9fafb 0%, #e5e7eb 100%);
    }
    
    .testimonial-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        margin: 1rem;
        box-shadow: var(--shadow-md);
    }
    
    .testimonial-rating {
        color: #fbbf24;
        margin-bottom: 1rem;
    }
    
    /* CTA Section */
    .cta-section {
        padding: 5rem 0;
        background: var(--dark-color);
        color: white;
        border-radius: 30px;
        margin: 5rem 0;
        position: relative;
        overflow: hidden;
    }
    
    .cta-background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--gradient-primary);
        opacity: 0.1;
    }
    
    /* Animations */
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.7; }
        100% { opacity: 1; }
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
    }
    
    .floating {
        animation: float 6s ease-in-out infinite;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }
        
        .hero-features {
            flex-direction: column;
            gap: 1rem;
        }
        
        .stats-section {
            margin-top: -50px;
        }
    }


    /* Video Section Styles */
.video-section {
    position: relative;
    overflow: hidden;
}

.video-section::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100px;
    background: linear-gradient(to top, #0f172a, transparent);
    pointer-events: none;
}

.video-container {
    position: relative;
    transition: transform 0.5s ease;
    background: #000;
}

.video-container:hover {
    transform: perspective(1000px) rotateY(-5deg) scale(1.01);
}

.video-container:hover .custom-video-controls {
    opacity: 1;
}

/* Custom Video Controls */
.custom-video-controls {
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 10;
}

.custom-video-controls.show {
    opacity: 1;
    display: flex !important;
}

/* Play Overlay */
#playOverlay {
    transition: all 0.3s ease;
}

#playOverlay.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.play-btn-container button {
    transition: all 0.3s ease;
    animation: pulse 2s infinite;
}

.play-btn-container button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);
}

/* Video Stats */
.video-stats {
    background: rgba(255,255,255,0.05);
    padding: 15px;
    border-radius: 10px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.1);
}

/* Volume Slider */
#volumeSlider::-webkit-slider-thumb {
    background: var(--primary-color);
}

#volumeSlider::-moz-range-thumb {
    background: var(--primary-color);
}

/* Responsive */
@media (max-width: 768px) {
    .video-container {
        transform: none !important;
    }
    
    .video-container:hover {
        transform: none !important;
    }
    
    .custom-video-controls .d-flex {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .custom-video-controls .mx-3 {
        margin-left: 0.5rem !important;
        margin-right: 0.5rem !important;
    }
    
    .video-stats .d-flex {
        flex-direction: column;
        align-items: flex-start !important;
        gap: 10px !important;
    }
    
    .video-stats .d-flex > div {
        width: 100%;
        justify-content: space-between;
    }
}

/* Video Focus State */
video:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

/* Volume control */
.volume-control {
    min-width: 120px;
}

/* Animation for play button */
@keyframes glow {
    0% { box-shadow: 0 0 10px rgba(99, 102, 241, 0.5); }
    50% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.8); }
    100% { box-shadow: 0 0 10px rgba(99, 102, 241, 0.5); }
}

.play-btn-container button {
    animation: glow 2s infinite;
}
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <div class="hero-badge animate__animated animate__fadeIn">
                <i class="fas fa-bolt"></i>
                <span>India's Fastest SIM Delivery in 2 Hours</span>
            </div>
            
            <h1 class="hero-title animate__animated animate__fadeInUp">
                Get Your <span class="hero-highlight">SIM Delivered</span><br>
                At Your Doorstep
            </h1>
            
            <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                Experience seamless SIM delivery. Choose your number, upload documents online, 
                and get doorstep delivery within hours. No queues, no paperwork, just convenience.
            </p>
            
            <div class="hero-features animate__animated animate__fadeInUp animate__delay-2s">
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <span>100% Safe & Secure</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <span>2-4 Hour Delivery</span>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <span>Choose Fancy Numbers</span>
                </div>
            </div>
            
            <div class="d-flex gap-3 flex-wrap animate__animated animate__fadeInUp animate__delay-3s">
                <a href="{% url 'new_connection' %}" class="btn btn-light btn-lg px-5 py-3 rounded-pill">
                    <i class="fas fa-bolt me-2"></i>Order New SIM
                </a>
                <a href="{% url 'sim_replacement_create' %}" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                    <i class="fas fa-redo me-2"></i>Replace SIM
                </a>
            </div>
        </div>
    </div>
    
    <!-- Floating Elements -->
    <div class="position-absolute bottom-0 end-0 me-5 floating d-none d-lg-block">
        <div class="feature-icon" style="width: 200px; height: 200px; background: rgba(255,255,255,0.1);">
            <i class="fas fa-shipping-fast fa-4x"></i>
        </div>
    </div>
</section>
<!-- Video Showcase Section -->
<section class="video-section py-5" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <div class="position-relative">
                    <!-- Video Container -->
                    <div class="video-container rounded-3 overflow-hidden shadow-lg" 
                         style="transform: perspective(1000px) rotateY(-5deg);">
                        <!-- Video with controls -->
                        <video 
                            id="mainVideo" 
                            class="w-100" 
                            controls
                            playsinline
                            preload="metadata"
                            poster="{% static 'images/video-poster.jpg' %}"
                            style="border-radius: 12px; min-height: 400px;">
                            <source src="{% static 'videos/sim-delivery-promo.mp4' %}" type="video/mp4">
                            <source src="{% static 'videos/sim-delivery-promo.webm' %}" type="video/webm">
                            <!-- Fallback -->
                            <div class="bg-dark text-white p-5 text-center">
                                <h4>Experience Fast SIM Delivery</h4>
                                <p>Your browser doesn't support HTML5 video.</p>
                                <a href="{% static 'videos/sim-delivery-promo.mp4' %}" class="btn btn-primary">
                                    Download Video
                                </a>
                            </div>
                        </video>
                        
                        <!-- Custom Video Controls Overlay -->
                        <div class="custom-video-controls position-absolute bottom-0 start-0 w-100 p-3 d-none">
                            <div class="d-flex align-items-center justify-content-between">
                                <!-- Play/Pause -->
                                <button id="customPlayBtn" class="btn btn-primary btn-sm rounded-circle">
                                    <i class="fas fa-play"></i>
                                </button>
                                
                                <!-- Progress Bar -->
                                <div class="progress mx-3 flex-grow-1" style="height: 5px; background: rgba(255,255,255,0.2);">
                                    <div id="videoProgress" class="progress-bar bg-primary" style="width: 0%;"></div>
                                </div>
                                
                                <!-- Time Display -->
                                <div class="text-white mx-3" style="min-width: 100px;">
                                    <span id="currentTime">0:00</span> / 
                                    <span id="durationTime">0:00</span>
                                </div>
                                
                                <!-- Volume -->
                                <div class="volume-control mx-3 d-flex align-items-center">
                                    <button id="muteBtn" class="btn btn-sm text-white">
                                        <i class="fas fa-volume-up"></i>
                                    </button>
                                    <input type="range" id="volumeSlider" class="form-range ms-2" 
                                           min="0" max="1" step="0.1" value="1" 
                                           style="width: 80px;">
                                </div>
                                
                                <!-- Fullscreen -->
                                <button id="fullscreenBtn" class="btn btn-sm text-white">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Play Overlay Button (only shows initially) -->
                        <div id="playOverlay" class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"
                             style="background: rgba(0,0,0,0.5); cursor: pointer; z-index: 5;">
                            <div class="text-center p-5">
                                <div class="play-btn-container mb-3">
                                    <button class="btn btn-primary btn-lg rounded-circle p-4 shadow-lg" 
                                            style="width: 80px; height: 80px;">
                                        <i class="fas fa-play fa-2x"></i>
                                    </button>
                                </div>
                                <h4 class="text-white mb-2">Watch Our Promo Video</h4>
                                <p class="text-light">SIM at Your Door—Fast! All Operators</p>
                                <small class="text-muted">Click to play with sound</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Video Stats -->
                    <div class="video-stats mt-3">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center gap-3">
                                <div class="d-flex align-items-center text-light">
                                    <i class="fas fa-eye me-2 text-primary"></i>
                                    <span>5.2K+ Views</span>
                                </div>
                                <div class="d-flex align-items-center text-light">
                                    <i class="fas fa-calendar-alt me-2 text-warning"></i>
                                    <span>2026-02-03</span>
                                </div>
                                <div class="d-flex align-items-center text-light">
                                    <i class="fas fa-clock me-2 text-info"></i>
                                    <span id="videoLength">2:30</span>
                                </div>
                            </div>
                            <button id="toggleCustomControls" class="btn btn-sm btn-outline-light">
                                <i class="fas fa-sliders-h"></i> Controls
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="ps-lg-5">
                    <!-- Badge -->
                    <span class="badge bg-primary bg-opacity-20 text-primary px-4 py-2 rounded-pill mb-3 d-inline-flex align-items-center">
                        <i class="fas fa-video me-2"></i> Featured Video
                    </span>
                    
                    <!-- Title -->
                    <h2 class="display-5 fw-bold text-white mb-4">
                        Watch: SIM at Your Door—<span class="text-warning">Fast!</span>
                    </h2>
                    
                    <!-- Subtitle -->
                    <div class="d-flex align-items-center mb-4">
                        <div class="d-flex align-items-center me-4">
                            <i class="fas fa-bolt text-warning me-2"></i>
                            <span class="text-light">2-4 Hour Delivery</span>
                        </div>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-tower-cell text-info me-2"></i>
                            <span class="text-light">All Operators</span>
                        </div>
                    </div>
                    
                    <!-- Description -->
                    <div class="video-description mb-4">
                        <p class="lead text-light mb-3" style="opacity: 0.9;">
                            <strong>Experience India's fastest SIM delivery service!</strong> Watch how we deliver 
                            Jio, Airtel, Vi and other operator SIM cards right to your doorstep 
                            in record time.
                        </p>
                        
                        <div class="bg-dark bg-opacity-50 p-4 rounded-3 mb-3">
                            <h5 class="text-white mb-3"><i class="fas fa-info-circle me-2 text-primary"></i> In This Video:</h5>
                            <ul class="text-light mb-0" style="opacity: 0.9;">
                                <li class="mb-2">✓ See our AI-powered delivery system in action</li>
                                <li class="mb-2">✓ Watch real customer delivery experiences</li>
                                <li class="mb-2">✓ Learn about our secure verification process</li>
                                <li>✓ See how to choose your favorite number online</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="d-flex flex-wrap gap-3">
                        <button id="playWithSound" class="btn btn-primary btn-lg px-4">
                            <i class="fas fa-volume-up me-2"></i> Play with Sound
                        </button>
                        <a href="{% url 'new_connection' %}" class="btn btn-success btn-lg px-4">
                            <i class="fas fa-bolt me-2"></i> Order Now
                        </a>
                      
                    </div>
                    
                    <!-- Social Share -->
                    <div class="mt-4 pt-3 border-top border-secondary">
                        <p class="text-light mb-2">Share this video:</p>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-primary rounded-circle" style="width: 40px; height: 40px;">
                                <i class="fab fa-facebook-f"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info rounded-circle" style="width: 40px; height: 40px;">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger rounded-circle" style="width: 40px; height: 40px;">
                                <i class="fab fa-youtube"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success rounded-circle" style="width: 40px; height: 40px;">
                                <i class="fab fa-whatsapp"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3 col-6">
                <div class="stat-card">
                    <div class="stat-number">50K+</div>
                    <p class="text-muted mb-0">SIMs Delivered</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card">
                    <div class="stat-number">2-4H</div>
                    <p class="text-muted mb-0">Avg Delivery Time</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card">
                    <div class="stat-number">4.9★</div>
                    <p class="text-muted mb-0">Customer Rating</p>
                </div>
            </div>
            <div class="col-md-3 col-6">
                <div class="stat-card">
                    <div class="stat-number">30+</div>
                    <p class="text-muted mb-0">Cities Covered</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="services-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Our Services</h2>
            <p class="lead text-muted">Complete telecom solutions at your doorstep</p>
        </div>
        
        <div class="row g-4">
            {% for conn_type in connection_types %}
            <div class="col-md-4">
                <div class="service-card">
                    <div class="service-icon" style="background: linear-gradient(135deg, 
                        {% if conn_type.color == 'primary' %}#6366f1{% endif %}
                        {% if conn_type.color == 'success' %}#10b981{% endif %}
                        {% if conn_type.color == 'warning' %}#f59e0b{% endif %}
                        {% if conn_type.color == 'info' %}#0ea5e9{% endif %} 0%, 
                        {% if conn_type.color == 'primary' %}#8b5cf6{% endif %}
                        {% if conn_type.color == 'success' %}#34d399{% endif %}
                        {% if conn_type.color == 'warning' %}#fbbf24{% endif %}
                        {% if conn_type.color == 'info' %}#38bdf8{% endif %} 100%); 
                        color: white;">
                        <i class="{{ conn_type.icon }}"></i>
                    </div>
                    <h4 class="fw-bold mb-3">{{ conn_type.name }}</h4>
                    <p class="text-muted mb-4">{{ conn_type.description }}</p>
                    <a href="{{ conn_type.url }}" class="btn btn-outline-primary w-100">
                        Get Started <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Popular Plans Section -->
<section class="plans-section">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h2 class="display-5 fw-bold mb-2">Popular Plans</h2>
                <p class="lead text-muted">Best selling plans from top operators</p>
            </div>
            <a href="{% url 'plan_list' %}" class="btn btn-outline-primary btn-lg">
                View All <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
        
        <div class="row g-4">
            {% for plan in popular_plans|slice:":3" %}
            <div class="col-md-4">
                <div class="plan-card">
                    {% if plan.is_popular %}
                    <div class="position-absolute top-0 end-0 m-3">
                        <span class="badge bg-warning text-dark px-3 py-2 rounded-pill">
                            <i class="fas fa-fire me-1"></i> Popular
                        </span>
                    </div>
                    {% endif %}
                    
                    <div class="plan-header">
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <img src="{{ plan.operator.logo.url }}" alt="{{ plan.operator.name }}" 
                                 class="rounded-circle me-2" style="width: 40px; height: 40px;">
                            <h5 class="fw-bold mb-0">{{ plan.operator.name }}</h5>
                        </div>
                        <h3 class="plan-price">₹{{ plan.price }}</h3>
                        <p class="text-muted mb-0">per {{ plan.get_full_validity }}</p>
                    </div>
                    
                    <div class="plan-features">
                        <h5 class="fw-bold mb-3">{{ plan.name }}</h5>
                        
                        <ul class="feature-list">
                            {% if plan.data_allowance %}
                            <li>
                                <i class="fas fa-database"></i>
                                <span>{{ plan.data_allowance }}</span>
                            </li>
                            {% endif %}
                            
                            <li>
                                <i class="fas fa-clock"></i>
                                <span>{{ plan.get_full_validity }}</span>
                            </li>
                            
                            {% if plan.benefits %}
                            {% for benefit in plan.benefits|slice:":3" %}
                            <li>
                                <i class="fas fa-check-circle"></i>
                                <span>{{ benefit }}</span>
                            </li>
                            {% endfor %}
                            {% endif %}
                        </ul>
                        
                        <a href="{% url 'plan_detail' plan.id %}" class="btn btn-primary w-100 mt-4">
                            View Details <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="testimonials-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Customer Stories</h2>
            <p class="lead text-muted">What our customers say about us</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="mb-4">"Ordered in the morning, got my SIM by afternoon. The delivery executive was very professional and helped me choose a great number!"</p>
                    <div class="d-flex align-items-center">
                        <div class="user-avatar me-3">
                            R
                        </div>
                        <div>
                            <h6 class="fw-bold mb-0">Rahul Verma</h6>
                            <small class="text-muted">Bangalore</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="mb-4">"SIM replacement was done within 3 hours! Excellent service and zero paperwork. Will definitely recommend to friends and family."</p>
                    <div class="d-flex align-items-center">
                        <div class="user-avatar me-3 bg-success">
                            P
                        </div>
                        <div>
                            <h6 class="fw-bold mb-0">Priya Sharma</h6>
                            <small class="text-muted">Mumbai</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="mb-4">"Porting my number was seamless. Got same-day delivery with my chosen fancy number. Truly India's fastest SIM delivery!"</p>
                    <div class="d-flex align-items-center">
                        <div class="user-avatar me-3 bg-warning">
                            S
                        </div>
                        <div>
                            <h6 class="fw-bold mb-0">Sanjay Singh</h6>
                            <small class="text-muted">Delhi</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-background"></div>
    <div class="container position-relative">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h2 class="display-5 fw-bold mb-3">Ready to Experience Fast SIM Delivery?</h2>
                <p class="lead mb-4">Join thousands of satisfied customers who trust us for their telecom needs.</p>
                <div class="d-flex gap-3 flex-wrap">
                    <a href="{% url 'new_connection' %}" class="btn btn-light btn-lg px-5 py-3 rounded-pill">
                        <i class="fas fa-bolt me-2"></i>Get Started Now
                    </a>
                    <a href="tel:18001234567" class="btn btn-outline-light btn-lg px-5 py-3 rounded-pill">
                        <i class="fas fa-phone-alt me-2"></i>Call: 1800-123-4567
                    </a>
                </div>
            </div>
            <div class="col-md-4 text-center">
                <div class="feature-icon" style="width: 150px; height: 150px; background: rgba(255,255,255,0.2); margin-left: auto;">
                    <i class="fas fa-headset fa-4x"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Operators Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h3 class="fw-bold mb-3">Trusted by Top Operators</h3>
            <p class="text-muted">Authorized partner of India's leading telecom companies</p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for operator in featured_operators|slice:":6" %}
            <div class="col-md-2 col-4">
                <div class="text-center p-3">
                    <img src="{{ operator.logo.url }}" alt="{{ operator.name }}" 
                         class="img-fluid mb-3" style="height: 40px; object-fit: contain;">
                    <h6 class="fw-bold mb-0">{{ operator.name }}</h6>
                    <small class="text-muted">{{ operator.get_operator_type_display }}</small>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Initialize animations on scroll
    document.addEventListener('DOMContentLoaded', function() {
        // Animate elements on scroll
        const animatedElements = document.querySelectorAll('.service-card, .stat-card, .plan-card, .testimonial-card');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });
        
        animatedElements.forEach(element => {
            observer.observe(element);
        });
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Update hero badge text periodically
        const heroBadge = document.querySelector('.hero-badge span');
        const texts = [
            'India\'s Fastest SIM Delivery in 2 Hours',
            '4.9★ Customer Rating',
            '30+ Cities Covered',
            '50,000+ SIMs Delivered'
        ];
        
        let currentIndex = 0;
        setInterval(() => {
            if (heroBadge) {
                heroBadge.style.opacity = '0';
                setTimeout(() => {
                    currentIndex = (currentIndex + 1) % texts.length;
                    heroBadge.textContent = texts[currentIndex];
                    heroBadge.style.opacity = '1';
                }, 300);
            }
        }, 4000);
    });

    // Video Player Controls
document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('mainVideo');
    const playOverlay = document.getElementById('playOverlay');
    const customControls = document.querySelector('.custom-video-controls');
    const customPlayBtn = document.getElementById('customPlayBtn');
    const muteBtn = document.getElementById('muteBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const videoProgress = document.getElementById('videoProgress');
    const currentTimeEl = document.getElementById('currentTime');
    const durationTimeEl = document.getElementById('durationTime');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const playWithSoundBtn = document.getElementById('playWithSound');
    const toggleControlsBtn = document.getElementById('toggleCustomControls');
    const downloadBtn = document.getElementById('downloadVideo');
    
    // Format time in MM:SS
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }
    
    // Initialize video when metadata is loaded
    video.addEventListener('loadedmetadata', function() {
        durationTimeEl.textContent = formatTime(video.duration);
        
        // Set video length in stats
        const videoLengthEl = document.getElementById('videoLength');
        if (videoLengthEl) {
            videoLengthEl.textContent = formatTime(video.duration);
        }
    });
    
    // Update progress bar and time
    video.addEventListener('timeupdate', function() {
        const progress = (video.currentTime / video.duration) * 100;
        videoProgress.style.width = `${progress}%`;
        currentTimeEl.textContent = formatTime(video.currentTime);
    });
    
    // Click on progress bar to seek
    const progressBar = document.querySelector('.progress');
    if (progressBar) {
        progressBar.addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / this.offsetWidth;
            video.currentTime = pos * video.duration;
        });
    }
    
    // Play/Pause functionality
    function togglePlayPause() {
        if (video.paused) {
            video.play();
            customPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
            playOverlay.classList.add('hidden');
        } else {
            video.pause();
            customPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
    }
    
    // Play Overlay click
    if (playOverlay) {
        playOverlay.addEventListener('click', function(e) {
            if (e.target.closest('.play-btn-container')) {
                togglePlayPause();
                video.muted = false; // Unmute when user clicks play
                updateMuteButton();
            }
        });
    }
    
    // Custom play button
    if (customPlayBtn) {
        customPlayBtn.addEventListener('click', togglePlayPause);
    }
    
    // Play with sound button
    if (playWithSoundBtn) {
        playWithSoundBtn.addEventListener('click', function() {
            video.muted = false;
            video.play();
            customPlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
            playOverlay.classList.add('hidden');
            updateMuteButton();
        });
    }
    
    // Mute/Unmute functionality
    function updateMuteButton() {
        if (video.muted || video.volume === 0) {
            muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
            volumeSlider.value = 0;
        } else {
            muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            volumeSlider.value = video.volume;
        }
    }
    
    if (muteBtn) {
        muteBtn.addEventListener('click', function() {
            video.muted = !video.muted;
            if (!video.muted && video.volume === 0) {
                video.volume = 1;
            }
            updateMuteButton();
        });
    }
    
    // Volume slider
    if (volumeSlider) {
        volumeSlider.addEventListener('input', function() {
            video.volume = this.value;
            video.muted = this.value === '0';
            updateMuteButton();
        });
    }
    
    // Fullscreen functionality
    if (fullscreenBtn) {
        fullscreenBtn.addEventListener('click', function() {
            const container = video.parentElement;
            
            if (!document.fullscreenElement) {
                if (container.requestFullscreen) {
                    container.requestFullscreen();
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                }
                this.innerHTML = '<i class="fas fa-compress"></i>';
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                this.innerHTML = '<i class="fas fa-expand"></i>';
            }
        });
        
        // Update fullscreen button when exiting fullscreen
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement) {
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
            }
        });
    }
    
    // Toggle custom controls
    if (toggleControlsBtn) {
        toggleControlsBtn.addEventListener('click', function() {
            customControls.classList.toggle('show');
            if (customControls.classList.contains('show')) {
                customControls.style.display = 'flex';
                setTimeout(() => {
                    customControls.style.opacity = '1';
                }, 10);
            } else {
                customControls.style.opacity = '0';
                setTimeout(() => {
                    customControls.style.display = 'none';
                }, 300);
            }
        });
    }
    
    // Download video
    if (downloadBtn) {
        downloadBtn.addEventListener('click', function() {
            const videoSrc = video.querySelector('source').src;
            const link = document.createElement('a');
            link.href = videoSrc;
            link.download = 'SIM-Delivery-Promo-' + new Date().toISOString().split('T')[0] + '.mp4';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });
    }
    
    // Show/hide custom controls on video hover
    if (video) {
        let controlsTimeout;
        const videoContainer = video.parentElement;
        
        videoContainer.addEventListener('mouseenter', function() {
            clearTimeout(controlsTimeout);
            customControls.style.opacity = '1';
            customControls.style.display = 'flex';
        });
        
        videoContainer.addEventListener('mouseleave', function() {
            controlsTimeout = setTimeout(() => {
                if (!video.paused) {
                    customControls.style.opacity = '0';
                    setTimeout(() => {
                        customControls.style.display = 'none';
                    }, 300);
                }
            }, 1000);
        });
        
        // Keep controls visible when video is paused
        video.addEventListener('pause', function() {
            clearTimeout(controlsTimeout);
            customControls.style.opacity = '1';
            customControls.style.display = 'flex';
        });
    }
    
    // Initialize mute button state
    updateMuteButton();
    
    // Social share buttons
    document.querySelectorAll('.btn-outline-primary, .btn-outline-info, .btn-outline-danger, .btn-outline-success').forEach(btn => {
        btn.addEventListener('click', function() {
            const platform = this.querySelector('i').className.split('fa-')[1].split(' ')[0];
            let shareUrl = window.location.href;
            let text = "Watch: SIM at Your Door—Fast! All Operators";
            
            switch(platform) {
                case 'facebook-f':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(shareUrl)}`;
                    break;
                case 'youtube':
                    // Could link to YouTube channel or video
                    shareUrl = '#';
                    alert('Subscribe to our YouTube channel for more videos!');
                    return;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(text + ' ' + shareUrl)}`;
                    break;
            }
            
            window.open(shareUrl, '_blank', 'width=600,height=400');
        });
    });
    
    // Auto-hide play overlay when video starts playing
    video.addEventListener('play', function() {
        playOverlay.classList.add('hidden');
    });
    
    // Show play overlay when video ends
    video.addEventListener('ended', function() {
        playOverlay.classList.remove('hidden');
        customPlayBtn.innerHTML = '<i class="fas fa-play"></i>';
    });
});


// FIX FOR LINKS OPENING IN NEW WINDOWS
(function() {
    'use strict';
    
    console.log('=== Link Fix Loaded ===');
    
    // Track all clicks on the page
    document.addEventListener('click', function(e) {
        console.log('Click detected on:', e.target);
        
        // Find the closest anchor tag
        let target = e.target;
        let link = null;
        
        // Traverse up the DOM to find the anchor
        while (target && target !== document) {
            if (target.tagName === 'A' && target.href) {
                link = target;
                break;
            }
            target = target.parentElement;
        }
        
        // If no link found, return
        if (!link) return;
        
        console.log('Link found:', {
            href: link.href,
            target: link.target,
            classList: Array.from(link.classList),
            isButton: link.classList.contains('btn'),
            isServiceCard: link.closest('.service-card')
        });
        
        // Skip if it's an external link (social media, etc.)
        const isExternal = link.href.includes('facebook.com') || 
                          link.href.includes('twitter.com') || 
                          link.href.includes('whatsapp.com') || 
                          link.href.includes('wa.me') ||
                          link.href.includes('youtube.com') ||
                          link.href.startsWith('mailto:') ||
                          link.href.startsWith('tel:');
        
        // Skip if it's a social share button
        const isSocialShare = link.classList.contains('btn-outline-primary') || 
                             link.classList.contains('btn-outline-info') || 
                             link.classList.contains('btn-outline-danger') || 
                             link.classList.contains('btn-outline-success');
        
        // Skip if it's a video download link
        const isVideoDownload = link.href.includes('.mp4') || link.href.includes('.webm');
        
        // Check if it's a service card link or main CTA
        const isServiceLink = link.closest('.service-card') || 
                             link.closest('.hero-section') || 
                             link.closest('.cta-section') ||
                             link.closest('.video-section');
        
        // If it's an internal link that should open in same window
        if (!isExternal && !isSocialShare && !isVideoDownload && isServiceLink) {
            console.log('Intercepting internal link click:', link.href);
            
            // Prevent default behavior
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // Navigate to the URL in the same window
            console.log('Navigating to:', link.href);
            window.location.href = link.href;
            
            return false;
        }
        
    }, true); // Use capture phase to intercept BEFORE other handlers
    
})();

// ALTERNATIVE SIMPLER FIX - Directly intercept service card links
document.addEventListener('DOMContentLoaded', function() {
    console.log('=== Direct Service Card Fix ===');
    
    // Target ALL links in service cards and main CTAs
    const selectors = [
        '.service-card a.btn',
        '.hero-section a.btn',
        '.cta-section a.btn',
        '.video-section a.btn'
    ].join(', ');
    
    const allLinks = document.querySelectorAll(selectors);
    console.log('Found', allLinks.length, 'links to fix');
    
    allLinks.forEach(link => {
        // Store original href
        const originalHref = link.href;
        
        // Remove any existing onclick handlers
        link.removeAttribute('onclick');
        
        // Add our own click handler
        link.addEventListener('click', function(e) {
            console.log('Service card/CTA link clicked:', originalHref);
            
            // Prevent all default behavior
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // Navigate in same window
            window.location.href = originalHref;
            
            return false;
        }, true); // Capture phase
        
        // Also add a backup handler on parent
        const parent = link.parentElement;
        if (parent) {
            parent.addEventListener('click', function(e) {
                if (e.target === link || link.contains(e.target)) {
                    console.log('Parent backup handler triggered');
                    e.preventDefault();
                    e.stopPropagation();
                    window.location.href = originalHref;
                    return false;
                }
            }, true);
        }
    });
});

// NUCLEAR OPTION: Intercept ALL clicks on the page
(function() {
    'use strict';
    
    console.log('=== Nuclear Link Fix Activated ===');
    
    // Intercept ALL clicks
    document.addEventListener('click', function(e) {
        // Find the anchor
        let target = e.target;
        let link = null;
        
        while (target && target !== document) {
            if (target.tagName === 'A' && target.href) {
                link = target;
                break;
            }
            target = target.parentElement;
        }
        
        // If no link, return
        if (!link) return;
        
        console.log('Nuclear: Link clicked:', link.href);
        
        // List of URLs that should open in same window
        const sameWindowUrls = [
            '/new-connection/',
            '/port-number/',
            '/sim-replacement/',
            '/plans/',
            '/plan/',
            '/operator/',
            '/dashboard/',
            '/profile/',
            '/login/',
            '/register/'
        ];
        
        // Check if this URL should open in same window
        const shouldOpenInSameWindow = sameWindowUrls.some(url => 
            link.href.includes(url)
        );
        
        // Check if it's NOT an external/social link
        const isProblematicExternal = link.href.includes('facebook.com') || 
                                     link.href.includes('twitter.com') || 
                                     link.href.includes('youtube.com');
        
        // Apply the fix
        if (shouldOpenInSameWindow && !isProblematicExternal && link.target !== '_blank') {
            console.log('Nuclear: Opening in same window:', link.href);
            
            // Stop everything
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // Force same window navigation
            window.location.href = link.href;
            
            return false;
        }
        
    }, true); // Capture phase - runs FIRST
    
})();
</script>
{% endblock %}